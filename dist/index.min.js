"use strict";!function t(e,r,n){function s(o,h){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!h&&u)return u(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var p=r[o]={exports:{}};e[o][0].call(p.exports,function(t){var r=e[o][1][t];return s(r||t)},p,p.exports,t,e,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,r){function n(){this.events={}}var s=function(t){return function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return this.events[e]=n.reduce(function(e,r){return e.push({fn:r,once:t}),e},this.events[e]||[]),this}},i=s(!1),o=s(!0);n.prototype.on=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return i.apply(this,e)},n.prototype.once=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return o.apply(this,e)},n.prototype.emit=function(t,e){for(var r=arguments.length,n=Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];return this.events[t]?(this.events[t]=this.events[t].filter(function(t){return t.fn.apply(e,n),!t.once}),this):this},n.prototype.off=function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];if(!this.events[t])return this;if(r.length){var s=this.events[t].filter(function(t){return!r.includes(t.fn)});s.length?this.events[t]=s:delete this.events[t]}else delete this.events[t];return this},n.prototype.offAll=function(){return this.events={},this},void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&document&&(window.EventEmitter=n)},{}],2:[function(t,e,r){function n(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||"number"!=typeof t)throw new Error("AsyncBufferLimit is required!");this.limit=t,this.autostart=e,this.stack=[],this.results=[],this.stopped=!1,this.process=!1,s.call(this)}var s=t("@nodeart/event_emitter");n.prototype=s.prototype,n.prototype.constructor=n,n.prototype.push=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return this.stack=this.stack.concat(e),this.stack.length>=this.limit&&(this.autostart?this.drainBuffer():this.emit("stack_filled",this)),this},n.prototype.drainBuffer=function(){var t=this;if(!this.process&&this.stack.length>0){var e=function e(r){t.results.push(r),t.stack.length>0?t.stopped?(t.process=!1,t.emit("stop",t,t.results)):t.pop(e):(t.process=!1,t.emit("drain",t,t.results),t.results=[])};this.stopped=!1,this.process=!0,this.emit("start",this),this.pop(e)}return this},n.prototype.drainBufferParallel=function(){var t=this;if(!this.process&&this.stack.length>0){var e=[],r=this.stack.length;this.stopped=!1,this.process=!0,this.emit("start",this);for(var n=this.stack.length-1;n>=0;n--)this.stack.pop()(function(n){return function(s){e[n]=s,0===(r-=1)&&(t.process=!1,t.emit("chunk_done",t,e),t.stopped?t.emit("stop",t,s):t.drainBufferParallel(),0===t.stack.length&&t.emit("drain",t,e))}}(n))}return this},n.prototype.pop=function(t){var e=this.results;return this.stack.pop()(t,e[e.length-1]),this},n.prototype.clearTasksStack=function(){return this.stack=[],this},n.prototype.stopExecution=function(){return this.stopped=!0,this},void 0!==e&&e.exports&&(e.exports=n),"undefined"!=typeof window&&document&&(window.AsyncBuffer=n)},{"@nodeart/event_emitter":1}]},{},[2]);